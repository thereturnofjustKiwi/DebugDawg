<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBERSECURE: Network Intrusion Triage</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style1.css">

    <style>
        /* Custom File Upload Styles */
        .file-upload-wrapper {
            position: relative;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            border: 2px solid #00ff00;
            border-radius: 4px;
            background: #001a00;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .file-upload-wrapper:hover {
            background: #003300;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
        }
        .file-upload-input {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        .file-upload-button {
            background: #00ff00;
            border-radius: 2px;
            padding: 10px 25px;
            box-shadow: 0 0 15px #00ff00;
            transition: background 0.3s ease, box-shadow 0.3s ease;
        }
        .file-upload-button:hover {
            background: #00cc00;
            box-shadow: 0 0 25px #00ff00, 0 0 18px #00cc00 inset;
        }
        .file-upload-filename {
            color: #00ff00;
            font-weight: 600;
            font-size: 1rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex-grow: 1;
        }
        .file-upload-wrapper:focus-within {
            outline: 2px solid #00ff00;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <!-- Top Navbar -->
    <nav class="top-nav">
        <div class="nav-container">
            <h1><i class="fas fa-shield-alt glow"></i>CYBERSECURE</h1>
            <ul>
                <!-- <li style="--i: 1;"><a href="#login"><i class="fas fa-sign-in-alt"></i> Login</a></li>
                <li style="--i: 2;"><a href="#about"><i class="fas fa-info-circle"></i> About Us</a></li>
                <li style="--i: 3;"><a href="#profile"><i class="fas fa-user"></i> Profile</a></li> -->
                <li style="--i: 4;"><a href="tutorial.html"><i class="fas fa-book"></i> Tutorial</a></li>
            </ul>
            <div class="hamburger" id="hamburger"><i class="fas fa-bars"></i></div>
        </div>
    </nav>

    <!-- Left Sidebar -->
    <nav class="sidebar" id="sidebar">
        <h1><i class="fas fa-lock glow"></i></h1>
        <ul>
            <li style="--i: 1;"><a href="#upload"><i class="fas fa-upload"></i> Upload</a></li>
            <li style="--i: 2;"><a href="#report"><i class="fas fa-chart-bar"></i> Reports</a></li>
            <li style="--i: 3;"><a href="#blockchain"><i class="fas fa-link"></i> Blockchain</a></li>
            <!-- <li style="--i: 4;"><a href="#simulation"><i class="fas fa-play"></i> Simulation</a></li>
            <li style="--i: 5;"><a href="#explanation"><i class="fas fa-brain"></i> Explanation</a></li> -->
        </ul>
    </nav>

    <main>
        <!-- Upload Section -->
        <section id="upload" class="section-glow">
            <h2>Upload Network Data File</h2>
            <input type="file" id="fileInput" accept=".csv,.txt,.json">
            <button id="uploadBtn" class="btn-glow">Upload and Process</button>
            <div class="scrollmenu">
                <div id="segregatedDataContainer" style="display: none;">
                    <h3>Segregated Extracted Data (First 10 Rows)</h3>
                    <table id="segregatedTable">
                        <thead id="segregatedTableHead"></thead>
                        <tbody id="segregatedTableBody"></tbody>
                    </table>
                    <button onclick="downloadPDF()">Download PDF</button>
<button onclick="downloadCSV()">Download CSV</button>
                </div>
            </div>
        </section>

        <!-- Chatbot Icon -->
        <div class="chatbot-icon" id="chatbotIcon">
            <i class="fas fa-robot"></i>
        </div>

        <!-- Chatbot Portal -->
        <div class="chatbot-portal" id="chatbotPortal">
            <div class="chat-header">
                <span>CYBERSECURE Chatbot</span>
                <button class="close-btn" id="closeChat">&times;</button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message bot">Welcome to CYBERSECURE! How can I assist with network intrusion triage?</div>
            </div>
            <div class="chat-input-area">
                <input type="text" id="chatInput" placeholder="Type your message...">
                <button id="sendBtn"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>

        <!-- Report Section -->
        <section id="report" class="section-glow">
            <h2>Load Data Report</h2>
            <button id="loadReportBtn" class="btn-glow">Generate Report</button>
            <div id="reportContent">
                <h3>Data Summary</h3>
                <p id="summaryText"></p>
                <div class="chart-container">
                    <canvas id="pieChart" width="400" height="200"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="barChart" width="400" height="200"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="lineChart" width="400" height="200"></canvas>
                </div>
            </div>
        </section>

        <!-- ==================== EXPORT SECTION ==================== -->
        <!-- <section id="export" class="section-glow">
            <div class="export-section" id="exportSection" style="display: none;">
                <h2>ðŸ“¥ Export Threat Report</h2>
                <div class="export-buttons">
                    <button class="export-btn pdf-btn" onclick="exportReport('pdf')">
                        <i class="fas fa-file-pdf"></i> Export PDF
                    </button>
                    <button class="export-btn txt-btn" onclick="exportReport('txt')">
                        <i class="fas fa-file-alt"></i> Export TXT (RAG)
                    </button>
                    <button class="export-btn kb-btn" onclick="exportReport('rag-kb')">
                        <i class="fas fa-robot"></i> Export RAG KB
                    </button>
                    <button class="export-btn all-btn" onclick="exportReport('all')">
                        <i class="fas fa-download"></i> Export All
                    </button>
                </div>
                <div id="exportStatus" class="export-status"></div>
            </div>
        </section> -->

        <!-- Blockchain Section -->
        <section id="blockchain" class="section-glow">
            <h2>Blockchain Report</h2>
            <button id="verifyChainBtn" class="btn-glow">Verify Chain Integrity</button>
            <div id="blockchainTableWrapper" style="max-height: 120px; overflow-y: auto; border: 2px solid #00ff00; margin-top: 10px;">
                <table id="blockchainTable">
                    <thead>
                        <tr>
                            <th>Entry</th>
                            <th>Hash</th>
                            <th>Prev Hash</th>
                            <th>Valid</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- Simulation Section -->
        <!-- <section id="simulation" class="section-glow">
            <h2>Real-Time Flow Simulation</h2>
            <button id="simulateBtn" class="btn-glow">Start Simulation</button>
            <div id="simulationResults"></div>
        </section>

        Explanation Section -->
        <!-- <section id="explanation" class="section-glow">
            <h2>XAI Explanation (SHAP)</h2>
            <input type="text" id="flowInput" placeholder="Enter 41 flow features (comma-separated)" value="0,1,45,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,123,6,1.0,1.0,0.0,0.0,0.05,0.07,0.0,255,26,0.10,0.05,0.0,0.0,1.0,1.0,0.0,0.0">
            <button id="explainBtn" class="btn-glow">Explain Prediction</button>
            <div id="explanationResults"></div>
        </section> -->
    </main>

    <footer>
        <p>&copy; 2023 CYBERSECURE. All rights reserved. | Powered by AI/ML for Network Security</p>
    </footer>
    
    <script src="script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

<script>
// ---- Export PDF ---- //
function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // Use your table ID
    doc.autoTable({ html: '#segregatedTable' });

    doc.save('table_data.pdf');
}

// ---- Export CSV ---- //
function downloadCSV() {
    const table = document.getElementById("segregatedTable");
    const rows = table.querySelectorAll("tr");
    let csv = [];

    rows.forEach(row => {
        const cols = row.querySelectorAll("th, td");
        const rowData = [];
        cols.forEach(col => rowData.push(col.innerText.replace(/,/g, ""))); 
        csv.push(rowData.join(","));
    });

    const csvContent = "data:text/csv;charset=utf-8," + csv.join("\n");
    const a = document.createElement("a");
    a.href = encodeURI(csvContent);
    a.download = "table_data.csv";
    a.click();
}
</script>
</body>
</html>
